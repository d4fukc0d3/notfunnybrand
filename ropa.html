<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>NOTFUNNYSHIRTS - Camisetas</title>
  <link rel="stylesheet" href="style/retro90s.css">
  <link id="dynamic-favicon" rel="icon" type="image/png" href="images/tab-images/ezgif-frame-001.png">
  <style>
    @font-face {
      font-family: "MyFont";
      src: url("fonts/Kristina.Bold.otf");
    }

    .coverflow-container {
      position: relative;
      height: 550px;
      margin: 40px 0;
      perspective: 1200px;
      touch-action: pan-y;
    }

    .coverflow {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .product-card {
      position: absolute;
      width: 320px;
      height: 420px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      transform-style: preserve-3d;
    }

    .product-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border: 3px ridge var(--neon-cyan);
      pointer-events: none;
      -webkit-user-drag: none;
      -webkit-touch-callout: none;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }

    .product-card.active img {
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.5), 0 0 60px rgba(0, 255, 255, 0.3);
    }

    .product-info {
      position: absolute;
      bottom: -130px;
      left: 0;
      right: 0;
      text-align: center;
      opacity: 0;
      transition: opacity 0.3s;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .product-card.active .product-info {
      opacity: 1;
    }

    .product-info h2 {
      font-family: var(--font-pixel);
      font-size: 12px;
      color: var(--neon-cyan);
      text-shadow: 1px 1px var(--neon-blue);
    }

    .product-info p {
      font-family: var(--font-vt);
      font-size: 28px;
      color: var(--neon-green);
      text-shadow: 0 0 10px var(--neon-green);
      animation: price-pulse 2s ease-in-out infinite;
    }

    .add-to-cart-btn {
      font-family: var(--font-pixel);
      font-size: 10px;
      color: var(--neon-green);
      background: linear-gradient(180deg, #444488, #222244);
      border: 3px outset var(--retro-border-light);
      padding: 8px 16px;
      cursor: pointer;
      margin: 0 auto;
      max-width: 120px;
      transition: all 0.1s;
      text-transform: uppercase;
    }

    .add-to-cart-btn:hover {
      border-style: inset;
      color: var(--neon-yellow);
      text-shadow: 0 0 8px var(--neon-yellow);
    }

    .add-to-cart-btn:active {
      transform: translate(1px, 1px);
    }

    .indicator {
      text-align: center;
      margin-top: 150px;
      font-family: var(--font-pixel);
      font-size: 10px;
      color: var(--neon-cyan);
      text-shadow: 0 0 5px var(--neon-cyan);
    }

    .swipe-arrow {
      display: none;
    }

    @keyframes slideRight {
      0%, 100% { transform: translateX(0); opacity: 0.5; }
      50% { transform: translateX(20px); opacity: 1; }
    }

    /* Cart nav link */
    .cart-nav-item {
      position: relative;
    }

    .cart-count-badge {
      background: var(--neon-red);
      color: white;
      font-size: 8px;
      padding: 1px 4px;
      border-radius: 50%;
      position: absolute;
      top: -6px;
      right: -6px;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .product-card { width: 260px; height: 340px; }
      .coverflow-container { height: 460px; }
    }

    @media (max-width: 768px) {
      .product-card { width: 200px; height: 260px; }
      .coverflow-container { height: 380px; margin: 20px 0; }
      .product-info { bottom: -100px; gap: 8px; }
      .product-info h2 { font-size: 10px; }
      .product-info p { font-size: 22px; }
      .add-to-cart-btn { font-size: 8px; padding: 6px 12px; }
      .indicator { margin-top: 120px; font-size: 9px; }
      .swipe-arrow {
        display: block;
        position: absolute;
        bottom: 15px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 2.5em;
        color: var(--neon-cyan);
        animation: slideRight 1.5s infinite ease-in-out;
        pointer-events: none;
        text-shadow: 0 0 10px var(--neon-cyan);
      }
    }

    @media (max-width: 480px) {
      .product-card { width: 170px; height: 220px; }
      .coverflow-container { height: 320px; }
      .product-info { bottom: -80px; gap: 5px; }
      .product-info h2 { font-size: 8px; }
      .product-info p { font-size: 18px; }
      .indicator { margin-top: 100px; }
    }
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="retro-nav">
    <a href="index.html" class="nav-logo">NOTFUNNYBRAND</a>
    <div class="nav-links">
      <a href="index.html">HOME</a>
      <a href="ropa.html" class="active">SHIRTS</a>
      <a href="gorras.html">CAPS</a>
      <a href="stickers.html">STICKERS</a>
      <a href="things.html">THINGS</a>
      <a href="cart.html" class="cart-nav-item">CART [ðŸ›’] <span class="cart-count-badge" id="cartCount">0</span></a>
    </div>
  </nav>

  <!-- Marquee -->
  <div class="retro-marquee">
    <span class="marquee-inner">
      ðŸ‘• NEW SHIRTS AVAILABLE!!! ðŸ‘• --- ALL SHIRTS $777 MXN --- ðŸ”¥ EXCLUSIVE DESIGNS ðŸ”¥ --- FREE SHIPPING ON ORDERS OVER $777 --- ðŸ‘• CLICK TO FLIP THE SHIRT ðŸ‘•
    </span>
  </div>

  <div class="retro-container">
    <!-- Title -->
    <h1 class="retro-title" style="font-family:'MyFont',var(--font-pixel);cursor:pointer;">
      <a href="index.html" style="color:inherit;text-decoration:none;">NOTFUNNYSHIRTS</a>
    </h1>

    <!-- Sparkle divider -->
    <div class="retro-divider sparkle-divider"></div>

    <!-- Under construction -->
    <div class="under-construction">
      <span>ðŸš§ NEW DESIGNS COMING SOON ðŸš§</span>
    </div>

    <!-- Coverflow -->
    <div class="coverflow-container">
      <div class="coverflow" id="coverflow"></div>
    </div>

    <div class="swipe-arrow">âžœ</div>

    <div class="indicator">
      <span id="currentIndex">1</span> / <span id="totalProducts">5</span>
    </div>

    <!-- Flame divider -->
    <div class="retro-divider flame-divider"></div>

    <!-- Visitor counter -->
    <div class="retro-counter" style="margin-top:30px;">
      <div class="counter-label">VISITORS:</div>
      <div class="counter-digits"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="retro-footer">
    <div class="retro-divider star-divider"></div>
    <p>Best viewed in Netscape Navigator 4.0 at 800x600</p>
    <p style="margin-top:8px;">
      <span class="retro-badge">HTML 4.0</span>
      <span class="retro-badge">CSS 2.0</span>
      <span class="retro-badge">JavaScript</span>
    </p>
    <p style="margin-top:8px;">
      <a href="https://www.instagram.com/notfunnybrand/">@notfunnybrand</a> |
      Made with ðŸ’€ in Mexico ðŸ‡²ðŸ‡½
    </p>
  </footer>

  <script src="script/retro-effects.js"></script>
  <script>
    const products = [
      {
        id: 1,
        front: 'shirts-images/2girlonecaguama.png',
        back: 'shirts-images/2girlsonecaguamabackog.png',
        title: '2 m0rr4s 1 kaguama',
        price: '$777'
      },
      {
        id: 2,
        front: 'shirts-images/JR.png',
        back: 'shirts-images/JRback.png',
        title: 'J. R. "Bob" Dobbs',
        price: '$777'
      },
      {
        id: 3,
        front: 'shirts-images/notnegodsilexia.png',
        back: 'shirts-images/notnegodsilexiaback.png',
        title: 'no tnego dsilexia',
        price: '$777'
      },
      {
        id: 4,
        front: 'shirts-images/notfunny69.png',
        back: 'shirts-images/chatarchivadoback.png',
        title: 'Rated +69 Notfunny 0r1g1n4ls',
        price: '$777'
      },
      {
        id: 5,
        front: 'shirts-images/seponchanllantasfrente.png',
        back: 'shirts-images/chatarchivadoback.png',
        title: 'sE p0NCH4An N4l6as',
        price: '$777'
      }
    ];

    let currentIndex = 0;
    let showingBack = {};
    let touchStartX = 0;
    let touchEndX = 0;

    const coverflow = document.getElementById('coverflow');
    const currentIndexEl = document.getElementById('currentIndex');
    const totalProductsEl = document.getElementById('totalProducts');
    const cartCountEl = document.getElementById('cartCount');

    totalProductsEl.textContent = products.length;

    // Cart Functions
    function getCart() {
      const cart = localStorage.getItem('cart');
      return cart ? JSON.parse(cart) : [];
    }

    function saveCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
    }

    function addToCart(product) {
      const cart = getCart();
      cart.push({
        id: product.id,
        title: product.title,
        price: product.price,
        front: product.front,
        back: product.back,
        addedAt: new Date().toISOString()
      });
      saveCart(cart);
      showAddedToCartFeedback();
    }

    function updateCartCount() {
      const cart = getCart();
      cartCountEl.textContent = cart.length;
    }

    function showAddedToCartFeedback() {
      const btn = document.querySelector('.product-card.active .add-to-cart-btn');
      if (btn) {
        btn.textContent = 'ADDED!';
        btn.style.color = '#00ff00';
        btn.style.textShadow = '0 0 10px #00ff00';
        setTimeout(() => {
          btn.textContent = '+1';
          btn.style.color = '';
          btn.style.textShadow = '';
        }, 1000);
      }
    }

    function createProductCards() {
      coverflow.innerHTML = '';
      products.forEach((product, i) => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML =
          '<img src="' + product.front + '" alt="' + product.title + '">' +
          '<div class="product-info">' +
            '<h2>' + product.title + '</h2>' +
            '<p>' + product.price + '</p>' +
            '<button class="add-to-cart-btn" data-product-id="' + product.id + '">+1</button>' +
          '</div>';

        const addBtn = card.querySelector('.add-to-cart-btn');
        addBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          addToCart(product);
        });

        card.addEventListener('click', function(e) {
          if (e.target.classList.contains('add-to-cart-btn')) return;
          if (i === currentIndex) {
            const img = card.querySelector('img');
            showingBack[i] = !showingBack[i];
            img.src = showingBack[i] ? product.back : product.front;
          } else {
            currentIndex = i;
            updateCoverflow();
          }
        });

        coverflow.appendChild(card);
      });
    }

    function updateCoverflow() {
      const cards = document.querySelectorAll('.product-card');
      cards.forEach((card, i) => {
        card.classList.remove('active');
        const offset = i - currentIndex;
        const absOffset = Math.abs(offset);

        if (absOffset === 0) {
          card.classList.add('active');
          card.style.transform = 'translateX(0) translateZ(0) rotateY(0deg) scale(1.15)';
          card.style.zIndex = 100;
          card.style.opacity = '1';
          card.style.filter = 'brightness(1)';
        } else if (absOffset === 1) {
          const dir = offset > 0 ? 1 : -1;
          card.style.transform = 'translateX(' + (dir * 260) + 'px) translateZ(-200px) rotateY(' + (-dir * 45) + 'deg) scale(0.8)';
          card.style.zIndex = 50;
          card.style.opacity = '0.7';
          card.style.filter = 'brightness(0.6)';
        } else if (absOffset === 2) {
          const dir = offset > 0 ? 1 : -1;
          card.style.transform = 'translateX(' + (dir * 440) + 'px) translateZ(-400px) rotateY(' + (-dir * 60) + 'deg) scale(0.6)';
          card.style.zIndex = 25;
          card.style.opacity = '0.4';
          card.style.filter = 'brightness(0.4)';
        } else {
          const dir = offset > 0 ? 1 : -1;
          card.style.transform = 'translateX(' + (dir * 600) + 'px) translateZ(-600px) rotateY(' + (-dir * 70) + 'deg) scale(0.4)';
          card.style.zIndex = 0;
          card.style.opacity = '0.2';
          card.style.filter = 'brightness(0.3)';
        }
      });
      currentIndexEl.textContent = currentIndex + 1;
    }

    // Touch handlers
    coverflow.addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    });
    coverflow.addEventListener('touchend', function(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });

    function handleSwipe() {
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) {
          currentIndex = (currentIndex + 1) % products.length;
        } else {
          currentIndex = (currentIndex - 1 + products.length) % products.length;
        }
        updateCoverflow();
      }
    }

    // Arrow keys
    document.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowLeft') {
        currentIndex = (currentIndex - 1 + products.length) % products.length;
        updateCoverflow();
      } else if (e.key === 'ArrowRight') {
        currentIndex = (currentIndex + 1) % products.length;
        updateCoverflow();
      }
    });

    // Init
    createProductCards();
    updateCoverflow();
    updateCartCount();

    setTimeout(function() {
      const arrow = document.querySelector('.swipe-arrow');
      if (arrow) arrow.style.display = 'none';
    }, 5000);
  </script>
</body>
</html>
